<form [ngrxFormState]="formState">
  <div class="row none-margin-hr ctgr-row">
    <div class="col-9 none-padding">
      <div class="ctgr-section-wrp">
        <div class="ctgr-section-title d-flex align-items-center justify-content-between">
          <div class="bl-gradient-title editable-section-title">Steps</div>
          <div class="field-value d-flex align-items-center">
            <label class="dnm-switch-btn">
              <!-- <input type="checkbox" [ngrxFormControlState]="formState.controls.stepsEnabled">
              <span class="dnm-switch-slider round"></span> -->
              <!-- <span class="icon-relative expand-btn expand-icon"></span> -->
              <!-- <span class="icon-relative expand-btn collapse-icon"></span> -->
              <span (click)="togle()"
                    [ngClass]="{'expand-icon': !formState.controls.stepsEnabled.value, 'collapse-icon': formState.controls.stepsEnabled.value}"
                    class="icon-relative expand-btn">
                </span>
            </label>
          </div>
        </div>
        <ng-container *ngIf="formState.controls.stepsEnabled.value">
          <div class="steps-wrp">
            <step-item (newRangeAdded)="onNewRangeAdd($event)"
                       (newStepAdded)="onNewStepAdd()"
                       (rangeChanged)="onChangeRange($event)"
                       (rangeDeleted)="onRangeDelete($event)"
                       (stepDeleted)="onStepDelete($event)"
                       *ngFor="let step of formState.controls.steps.controls; trackBy: trackByIndex; index as stepIndex"
                       [stepIndex]="stepIndex + 1"
                       [step]="step"
                       [units]="unitsOfMeasurement$ | async"></step-item>
          </div>
          <a (click)="onNewStepAdd()"
             *ngIf="formState.controls.steps.value?.length === 0"
             class="blue-text-btn add-step-btn"
             href="javascript:void(0);">
            <i class="add-icon"></i>Add new step
          </a>
        </ng-container>
      </div>
    </div>
  </div>
</form>
