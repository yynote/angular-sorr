<div [@navCollapse]="isNavbarCollapsed" [ngClass]='{ "navbar-collapsed": isNavbarCollapsed }' class='main-nav'>
  <nav class="navbar navbar-expand-md align-content-start d-flex">
    <button (click)='toggle()' [attr.aria-expanded]='isExpanded' aria-controls="navbarText" aria-label="Toggle navigation"
            class="navbar-toggler"
            data-target=".navbar-collapse" data-toggle="collapse" type="button">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="navbar-profile text-right">
      <div class="collapse-btn d-flex justify-content-end">
        <i (click)="navbarCollapseToggle($event)" class="icon br-clp-arrow-icon"></i>
      </div>
    </div>
    <div class='clearfix'></div>

    <div *ngIf="!isNavbarCollapsed && currentBranchId" [ngClass]='{ "in": isExpanded }'
         class='collapse navbar-collapse show'>
      <ul class='nav navbar-nav text-uppercase'>
        <li [routerLinkActiveOptions]='{ exact: true }' [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId]'>
            <span class='navbar-icon dashboard-icon'></span>
            <span class="nav-item-text">Dashboard</span>
          </a>
        </li>
        <li *ngIf="accessPermission.canViewClients || accessPermission.canManageClients"
            [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId, "clients"]'>
            <span class='navbar-icon clients-icon'></span>
            <span class="nav-item-text">Clients</span>
          </a>
        </li>
        <li *ngIf="accessPermission.canViewBuildings || accessPermission.canUpdateBuildings || accessPermission.canCreateBuildings "
            [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId,"buildings"]'>
            <span class='navbar-icon buildings-icon'></span>
            <span class="nav-item-text">Buildings</span>
          </a>
        </li>
        <li [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId,"suppliers"]'>
            <span class='navbar-icon suppliers-icon'></span>
            <span class="nav-item-text">Suppliers</span>
          </a>
        </li>
        <li *ngIf="accessPermission.canViewBuildings || accessPermission.canUpdateBuildings || accessPermission.canCreateBuildings "
            [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId,"marketing"]'>
            <span class='navbar-icon marketing-icon'></span>
            <span class="nav-item-text">Marketing</span>
          </a>
        </li>
        <li *ngIf="accessPermission.canManageRoles || accessPermission.canManageUserProfiles"
            [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId, "user-profiles"]'>
            <span class='navbar-icon user-profiles-icon'></span>
            <span class="nav-item-text">User Profiles</span>
          </a>
        </li>
        <li *ngIf="accessPermission.canManageSettings" [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId, "settings"]'>
            <span class='navbar-icon settings-icon'></span>
            <span class="nav-item-text">Settings</span>
          </a>
        </li>
      </ul>
    </div>

    <div *ngIf="isNavbarCollapsed" [ngClass]='{ "in": isExpanded }' class='collapse navbar-collapse show'>
      <ul class='nav navbar-nav text-uppercase'>
        <li [routerLinkActiveOptions]='{ exact: true }' [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId, ""]'>
            <span class='navbar-icon dashboard-icon'></span>
          </a>
        </li>
        <li *ngIf="accessPermission.canViewClients || accessPermission.canManageClients"
            [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId, "clients"]'>
            <span class='navbar-icon clients-icon'></span>
          </a>
        </li>
        <li *ngIf="accessPermission.canViewBuildings || accessPermission.canUpdateBuildings || accessPermission.canCreateBuildings "
            [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId, "buildings"]'>
            <span class='navbar-icon buildings-icon'></span>
          </a>
        </li>
        <li [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId, "suppliers"]'>
            <span class='navbar-icon suppliers-icon'></span>
          </a>
        </li>
        <li *ngIf="accessPermission.canViewBuildings || accessPermission.canUpdateBuildings || accessPermission.canCreateBuildings "
            [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId, "marketing"]'>
            <span class='navbar-icon marketing-icon'></span>
          </a>
        </li>
        <li *ngIf="accessPermission.canManageRoles || accessPermission.canManageUserProfiles"
            [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId, "user-profiles"]'>
            <span class='navbar-icon user-profiles-icon'></span>
          </a>
        </li>
        <li *ngIf="accessPermission.canManageSettings" [routerLinkActive]='["link-active"]'>
          <a [routerLink]='["/branch", currentBranchId, "settings"]'>
            <span class='navbar-icon settings-icon'></span>
          </a>
        </li>
      </ul>
    </div>

    <div *ngIf="isSuperAdmin" [ngClass]='{ "in": isExpanded }' class='collapse navbar-collapse show bottom-navbar'>
      <ul class='nav navbar-nav text-uppercase w-100'>
        <li>
          <a [routerLink]='["/admin"]'>
            <span class='navbar-icon ms-admin-icon'></span>
            <span *ngIf="!isNavbarCollapsed" class="nav-item-text">MC Admin</span>
          </a>
        </li>
      </ul>
    </div>
  </nav>
</div>
